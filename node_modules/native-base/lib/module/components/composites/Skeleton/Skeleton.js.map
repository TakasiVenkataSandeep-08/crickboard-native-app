{"version":3,"sources":["Skeleton.tsx"],"names":["React","Animated","Platform","View","useThemeProps","canUseDom","Box","Skeleton","allProps","ref","isDomUsable","variant","children","props","newProps","style","skeletonColor","baseColor","blinkAnim","useRef","Value","current","useEffect","blink","sequence","timing","toValue","duration","useNativeDriver","OS","loop","start","skeletonStyle","skeleton","position","top","bottom","height","width","borderRadius","backgroundColor","opacity","transform","scaleY","undefined","memo","forwardRef"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Animated, Platform, View } from 'react-native';\nimport { useThemeProps } from '../../../hooks';\nimport { canUseDom } from '../../../utils';\nimport Box from '../../primitives/Box';\nimport type { ISkeletonProps } from './types';\n\nconst Skeleton = (allProps: ISkeletonProps, ref: any) => {\n  const isDomUsable = canUseDom();\n  const { variant, children, ...props } = allProps;\n  const newProps = useThemeProps('Skeleton', props);\n  const { style, skeletonColor, baseColor } = newProps;\n  const blinkAnim = React.useRef(new Animated.Value(0)).current;\n\n  React.useEffect(() => {\n    if (isDomUsable) {\n      const blink = Animated.sequence([\n        Animated.timing(blinkAnim, {\n          toValue: 1,\n          duration: 1000,\n          useNativeDriver: Platform.OS !== 'web',\n        }),\n        Animated.timing(blinkAnim, {\n          toValue: 0,\n          duration: 1000,\n          useNativeDriver: Platform.OS !== 'web',\n        }),\n      ]);\n      Animated.loop(blink).start();\n    }\n  }, [blinkAnim, isDomUsable]);\n\n  const skeletonStyle: any = {\n    skeleton: {\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      height: '100%',\n      width: '100%',\n      borderRadius: variant === 'circle' ? 999 : 3,\n      backgroundColor: skeletonColor,\n      opacity: blinkAnim, // Bind opacity to animated value\n    },\n  };\n\n  return (\n    <Box\n      style={[\n        style,\n        {\n          transform:\n            props.transform ?? variant === 'text'\n              ? [{ scaleY: 0.6 }]\n              : undefined,\n        },\n      ]}\n      borderRadius={variant === 'circle' ? 999 : 3}\n      bg={baseColor}\n      {...props}\n      ref={ref}\n    >\n      <Animated.View style={skeletonStyle.skeleton} />\n      {children ? <View style={{ opacity: 0 }}>{children}</View> : null}\n    </Box>\n  );\n};\n\nexport default React.memo(React.forwardRef(Skeleton));\n"]}