{"version":3,"sources":["Avatar.tsx"],"names":["React","Box","Image","Text","useThemeProps","Avatar","props","ref","error","setError","useState","size","style","source","children","remainingProps","_text","newProps","name","Badge","remainingChildren","Children","map","child","key","type","push","imageFitStyle","height","width","borderRadius","length","memo","forwardRef"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,EAAcC,KAAd,EAAqBC,IAArB,QAAiC,kBAAjC;AACA,SAASC,aAAT,QAA8B,gBAA9B;;AAGA,MAAMC,MAAM,GAAG,CAACC,KAAD,EAAsBC,GAAtB,KAAmC;AAChD,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBT,KAAK,CAACU,QAAN,CAAe,KAAf,CAA1B;AACA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA,MAAf;AAAuBC,IAAAA,QAAvB;AAAiC,OAAGC;AAApC,MAAuDT,KAA7D;AAEA,QAAM;AAAEU,IAAAA,KAAF;AAAS,OAAGC;AAAZ,MAAyBb,aAAa,CAAC,QAAD,EAAW,EACrD,GAAGW,cADkD;AAErDG,IAAAA,IAAI,EAAE,QAF+C;AAGrDP,IAAAA;AAHqD,GAAX,CAA5C;AAMA,MAAIQ,KAAK,gBAAG,yCAAZ;AACA,MAAIC,iBAAgC,GAAG,EAAvC,CAXgD,CAYhD;;AACApB,EAAAA,KAAK,CAACqB,QAAN,CAAeC,GAAf,CAAmBR,QAAnB,EAA6B,CAACS,KAAD,EAAQC,GAAR,KAAgB;AAAA;;AAC3C,QACE,OAAOD,KAAK,CAACE,IAAb,KAAsB,QAAtB,IACA,qBAAAF,KAAK,CAACE,IAAN,CAAWA,IAAX,sEAAiBP,IAAjB,MAA0B,aAF5B,EAGE;AACAC,MAAAA,KAAK,GAAGI,KAAR;AACD,KALD,MAKO;AACLH,MAAAA,iBAAiB,CAACM,IAAlB,CACE,OAAOH,KAAP,KAAiB,QAAjB,gBACE,oBAAC,IAAD;AAAM,QAAA,GAAG,EAAE,qBAAqBC;AAAhC,SAAyCR,KAAzC,GACGO,KADH,CADF,GAKEA,KANJ;AASD;AACF,GAjBD;AAmBA,QAAMI,aAAa,GAAG;AAAEC,IAAAA,MAAM,EAAE,MAAV;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAAtB;AAEA,sBACE,oBAAC,GAAD,eAASZ,QAAT;AAAmB,IAAA,KAAK,EAAEL,KAA1B;AAAiC,IAAA,GAAG,EAAEL;AAAtC,MACGM,MAAM,IAAI,CAACL,KAAX,gBACC,oBAAC,KAAD;AACE,IAAA,YAAY,EAAES,QAAQ,CAACa,YADzB;AAEE,IAAA,MAAM,EAAEjB,MAFV;AAGE,IAAA,GAAG,EAAE,IAHP;AAIE,IAAA,IAAI,EAAEG,KAJR;AAKE,IAAA,KAAK,EAAE,CAACJ,KAAD,EAAQe,aAAR,CALT;AAME,IAAA,OAAO,EAAE,MAAM;AACblB,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AARH,IADD,GAWGW,iBAAiB,CAACW,MAAlB,KAA6B,CAA7B,gBACF,oBAAC,IAAD,EAAUf,KAAV,OADE,CACyB;AADzB,IAGFI,iBAfJ,EAiBGD,KAjBH,CADF;AAqBD,CAvDD;;AAyDA,4BAAenB,KAAK,CAACgC,IAAN,eAAWhC,KAAK,CAACiC,UAAN,CAAiB5B,MAAjB,CAAX,CAAf","sourcesContent":["import React from 'react';\nimport { Box, Image, Text } from '../../primitives';\nimport { useThemeProps } from '../../../hooks';\nimport type { IAvatarProps } from './types';\n\nconst Avatar = (props: IAvatarProps, ref: any) => {\n  const [error, setError] = React.useState(false);\n  const { size, style, source, children, ...remainingProps } = props;\n\n  const { _text, ...newProps } = useThemeProps('Avatar', {\n    ...remainingProps,\n    name: 'avatar',\n    size,\n  });\n\n  let Badge = <></>;\n  let remainingChildren: JSX.Element[] = [];\n  //  Pop Badge from children\n  React.Children.map(children, (child, key) => {\n    if (\n      typeof child.type === 'object' &&\n      child.type.type?.name === 'AvatarBadge'\n    ) {\n      Badge = child;\n    } else {\n      remainingChildren.push(\n        typeof child === 'string' ? (\n          <Text key={'avatar-children-' + key} {..._text}>\n            {child}\n          </Text>\n        ) : (\n          child\n        )\n      );\n    }\n  });\n\n  const imageFitStyle = { height: '100%', width: '100%' };\n\n  return (\n    <Box {...newProps} style={style} ref={ref}>\n      {source && !error ? (\n        <Image\n          borderRadius={newProps.borderRadius}\n          source={source}\n          alt={'--'}\n          _alt={_text}\n          style={[style, imageFitStyle]}\n          onError={() => {\n            setError(true);\n          }}\n        />\n      ) : remainingChildren.length === 0 ? (\n        <Text {..._text}>--</Text> // default alternate\n      ) : (\n        remainingChildren\n      )}\n      {Badge}\n    </Box>\n  );\n};\n\nexport default React.memo(React.forwardRef(Avatar));\n"]}