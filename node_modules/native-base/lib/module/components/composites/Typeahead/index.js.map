{"version":3,"sources":["index.tsx"],"names":["React","useState","useCallback","forwardRef","ScrollView","Box","Input","Button","Link","Text","useColorMode","useTypeahead","extractInObject","layoutPropsList","Typeahead","options","renderItem","onChangeText","toggleIcon","dropdownHeight","numberOfItems","onSelectedItemChange","inputValue","getOptionLabel","props","ref","inputItems","setInputItems","layoutProps","newProps","colorMode","tempOptions","map","value","_ind","push","isOpen","getInputProps","getMenuItemProps","getMenuProps","getToggleButtonProps","items","itemToString","item","toString","onInputValueChange","filter","toLowerCase","includes","toggleIconSetter","dropdownTop","setDropDownTop","onLayout","event","height","nativeEvent","layout","length","slice","index","memo"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, forwardRef } from 'react';\nimport { ScrollView } from 'react-native';\nimport Box from '../../primitives/Box';\nimport Input from '../../primitives/Input';\nimport Button from '../../primitives/Button';\nimport Link from '../../primitives/Link';\nimport Text from '../../primitives/Text';\nimport { useColorMode } from './../../../core';\nimport { useTypeahead } from './useTypeahead';\nimport { extractInObject } from '../../../theme/tools';\nimport { ITypeaheadProps, layoutPropsList } from './types';\n\nconst Typeahead = (\n  {\n    options,\n    renderItem,\n    onChangeText,\n    toggleIcon,\n    dropdownHeight,\n    numberOfItems,\n    onSelectedItemChange,\n    inputValue,\n    getOptionLabel,\n    ...props\n  }: ITypeaheadProps,\n  ref: any\n) => {\n  const [inputItems, setInputItems] = React.useState(options);\n  const [layoutProps, newProps] = extractInObject(props, layoutPropsList);\n  const { colorMode } = useColorMode();\n  let tempOptions: any[] = [];\n  if (getOptionLabel) {\n    options.map((value: any, _ind: number) => {\n      tempOptions.push(getOptionLabel(value));\n    });\n    options = tempOptions;\n  }\n\n  const {\n    isOpen,\n    getInputProps,\n    getMenuItemProps,\n    getMenuProps,\n    getToggleButtonProps,\n  } = useTypeahead({\n    items: inputItems,\n    itemToString: (item) => item.toString(),\n    onInputValueChange: ({ inputValue }) => {\n      onChangeText && onChangeText(inputValue);\n      setInputItems(\n        options.filter((item: any) =>\n          item.toLowerCase().includes(inputValue.toLowerCase())\n        )\n      );\n    },\n    onSelectedItemChange,\n  });\n  const toggleIconSetter = () => {\n    if (typeof toggleIcon === 'function')\n      return toggleIcon({\n        isOpen: isOpen && getInputProps(inputValue, onChangeText).value !== '',\n      });\n    return toggleIcon;\n  };\n\n  // Causing App to crash , commenting this might have caused future bugs , might need a revisit\n  // React.useEffect(() => {\n  //   if (getInputProps(inputValue, onChangeText).value === '') {\n  //     // getToggleButtonProps().onPress();\n  //   }\n  // }, [inputValue, onChangeText, getInputProps, getToggleButtonProps]);\n\n  const [dropdownTop, setDropDownTop]: any = useState(55);\n\n  const onLayout = useCallback((event) => {\n    const { height } = event.nativeEvent.layout;\n    setDropDownTop(height % 2 === 0 ? height + 1 : height); //not to use theme values\n  }, []);\n  return (\n    <Box width=\"100%\" flexDirection=\"row\" onLayout={onLayout} {...layoutProps}>\n      <Box flex={1}>\n        <Input\n          {...newProps}\n          {...getInputProps(inputValue, onChangeText)}\n          InputRightElement={\n            <Button variant=\"unstyled\" m={0} p={0} {...getToggleButtonProps()}>\n              {toggleIconSetter()}\n            </Button>\n          }\n          ref={ref}\n        />\n      </Box>\n      <Box\n        position=\"absolute\"\n        top={dropdownTop}\n        width=\"100%\"\n        height={dropdownHeight ? dropdownHeight : 200}\n        {...getMenuProps()}\n      >\n        <ScrollView>\n          {isOpen &&\n            getInputProps(inputValue, onChangeText).value !== '' &&\n            (numberOfItems && numberOfItems < inputItems.length\n              ? inputItems.slice(0, numberOfItems)\n              : inputItems\n            ).map((item: any, index: number) => (\n              <Link\n                isUnderlined={false}\n                key={`${item}${index}`}\n                {...getMenuItemProps(item, index)}\n              >\n                {renderItem ? (\n                  renderItem(item)\n                ) : (\n                  <Box\n                    flex={1}\n                    bg={colorMode === 'light' ? 'gray.100' : 'gray.600'}\n                    p={4}\n                  >\n                    <Text>{item}</Text>\n                  </Box>\n                )}\n              </Link>\n            ))}\n        </ScrollView>\n      </Box>\n    </Box>\n  );\n};\n\nexport default React.memo(forwardRef(Typeahead));\nexport { useTypeahead };\n"]}