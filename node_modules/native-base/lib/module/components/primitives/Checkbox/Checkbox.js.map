{"version":3,"sources":["Checkbox.tsx"],"names":["React","useContext","TouchableOpacity","Platform","mergeRefs","useThemeProps","Center","FormControlContext","Box","Icon","useToggleState","VisuallyHidden","CheckboxGroupContext","useHover","useCheckbox","useCheckboxGroupItem","useFocusRing","Checkbox","icon","props","ref","formControlContext","checkboxGroupContext","activeColor","borderColor","iconColor","size","newProps","_ref","useRef","mergedRef","state","defaultSelected","defaultIsChecked","isSelected","isChecked","groupState","isHovered","inputProps","value","checked","isDisabled","disabled","sizedIcon","cloneElement","color","children","outlineColor","component","OS","cursor","focusProps","isFocusVisible","memo","forwardRef"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport {\n  TouchableOpacity,\n  Platform,\n  TouchableOpacityProps,\n} from 'react-native';\nimport { mergeRefs } from './../../../utils';\nimport { useThemeProps } from '../../../hooks';\nimport { Center } from '../../composites/Center';\nimport {\n  FormControlContext,\n  IFormControlContext,\n} from '../../composites/FormControl';\nimport Box from '../Box';\nimport Icon from '../Icon';\nimport type { ICheckboxProps } from './types';\nimport { useToggleState } from '@react-stately/toggle';\nimport { VisuallyHidden } from '@react-aria/visually-hidden';\nimport { CheckboxGroupContext } from './CheckboxGroup';\nimport { useHover } from '@react-native-aria/interactions';\nimport { useCheckbox, useCheckboxGroupItem } from '@react-native-aria/checkbox';\nimport { useFocusRing } from '@react-native-aria/focus';\n\nconst Checkbox = ({ icon, ...props }: ICheckboxProps, ref: any) => {\n  const formControlContext: IFormControlContext = React.useContext(\n    FormControlContext\n  );\n\n  const checkboxGroupContext = React.useContext(CheckboxGroupContext);\n  const {\n    activeColor,\n    borderColor,\n    iconColor,\n    size,\n    ...newProps\n  } = useThemeProps('Checkbox', {\n    ...checkboxGroupContext,\n    ...formControlContext,\n    ...props,\n  });\n  let _ref = React.useRef();\n  const mergedRef = mergeRefs([ref, _ref]);\n  let state = useToggleState({\n    ...props,\n    defaultSelected: props.defaultIsChecked,\n    isSelected: props.isChecked,\n  });\n  let groupState = useContext(CheckboxGroupContext);\n  const { isHovered } = useHover({}, _ref);\n\n  // Swap hooks depending on whether this checkbox is inside a CheckboxGroup.\n  // This is a bit unorthodox. Typically, hooks cannot be called in a conditional,\n  // but since the checkbox won't move in and out of a group, it should be safe.\n  let { inputProps } = groupState\n    ? // eslint-disable-next-line react-hooks/rules-of-hooks\n      useCheckboxGroupItem(\n        {\n          ...newProps,\n          value: newProps.value,\n        },\n        groupState.state,\n        //@ts-ignore\n        mergedRef\n      )\n    : // eslint-disable-next-line react-hooks/rules-of-hooks\n      useCheckbox(\n        newProps,\n        state,\n        //@ts-ignore\n        mergedRef\n      );\n\n  const isChecked = inputProps.checked;\n  const isDisabled = inputProps.disabled;\n  const sizedIcon = icon\n    ? () =>\n        React.cloneElement(\n          icon,\n          {\n            size,\n            color: icon.props.color ? icon.props.color : iconColor,\n          },\n          icon.props.children\n        )\n    : null;\n  const outlineColor =\n    isHovered && !isDisabled\n      ? activeColor\n      : isChecked\n      ? isDisabled\n        ? borderColor\n        : activeColor\n      : borderColor;\n  const component = (\n    <Box\n      flexDirection=\"row\"\n      alignItems=\"center\"\n      {...newProps}\n      opacity={isDisabled ? 0.4 : 1}\n      {...(Platform.OS === 'web'\n        ? {\n            disabled: isDisabled,\n            cursor: isDisabled ? 'not-allowed' : 'auto',\n          }\n        : {})}\n    >\n      <Center\n        backgroundColor={\n          isChecked ? (isDisabled ? borderColor : activeColor) : 'transparent'\n        }\n        borderColor={outlineColor}\n        borderWidth={1}\n        borderRadius={4}\n        p={1}\n      >\n        {icon && sizedIcon && isChecked ? (\n          sizedIcon()\n        ) : (\n          <Icon\n            name=\"check-bold\"\n            type=\"MaterialCommunityIcons\"\n            size={size}\n            color={iconColor}\n            opacity={isChecked ? 1 : 0}\n          />\n        )}\n      </Center>\n      {props.children}\n    </Box>\n  );\n\n  const { focusProps, isFocusVisible } = useFocusRing();\n\n  return (\n    <>\n      {Platform.OS === 'web' ? (\n        <Box\n          // @ts-ignore - RN web supports accessibilityRole=\"label\"\n          accessibilityRole=\"label\"\n          ref={mergedRef}\n          outlineWidth={isFocusVisible ? 1 : 0}\n          outlineColor={activeColor}\n          outlineStyle={'solid'}\n        >\n          <VisuallyHidden>\n            <input {...inputProps} {...focusProps} ref={mergedRef}></input>\n          </VisuallyHidden>\n\n          {component}\n        </Box>\n      ) : (\n        <TouchableOpacity\n          {...(inputProps as TouchableOpacityProps)}\n          ref={mergedRef}\n        >\n          {component}\n        </TouchableOpacity>\n      )}\n    </>\n  );\n};\n\nexport default React.memo(React.forwardRef(Checkbox));\n"]}