{"version":3,"sources":["index.tsx"],"names":["StyledImage","RNImage","color","space","layout","flexbox","border","position","customPosition","customBorder","customBackground","customOutline","customShadow","customExtra","customLayout","Image","style","alt","fallbackSource","source","ignoreFallback","_alt","props","ref","renderedSource","setSource","alternate","setAlternate","React","useEffect","onImageLoadError","event","console","warn","nativeEvent","error","newProps","onError","memo","forwardRef"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AASA;;AACA;;;;;;;;;;AAGA,MAAMA,WAAW,GAAG,qBAAOC,kBAAP,EAClBC,mBADkB,EAElBC,mBAFkB,EAGlBC,oBAHkB,EAIlBC,qBAJkB,EAKlBC,oBALkB,EAMlBC,sBANkB,EAOlBC,2BAPkB,EAQlBC,yBARkB,EASlBC,6BATkB,EAUlBC,0BAVkB,EAWlBC,yBAXkB,EAYlBC,wBAZkB,EAalBC,yBAbkB,CAApB;;AAgBA,MAAMC,KAAK,GAAG,CACZ;AACEC,EAAAA,KADF;AAEEC,EAAAA,GAFF;AAGEC,EAAAA,cAHF;AAIEC,EAAAA,MAJF;AAKEC,EAAAA,cALF;AAMEC,EAAAA,IANF;AAOE,KAAGC;AAPL,CADY,EAUZC,GAVY,KAWT;AACH,MAAI,CAACC,cAAD,EAAiBC,SAAjB,IAA8B,qBAASN,MAAT,CAAlC;AACA,MAAI,CAACO,SAAD,EAAYC,YAAZ,IAA4B,qBAAS,KAAT,CAAhC;;AAEAC,iBAAMC,SAAN,CAAgB,MAAM;AACpBF,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAF,IAAAA,SAAS,CAACN,MAAD,CAAT;AACD,GAHD,EAGG,CAACA,MAAD,CAHH;;AAKA,MAAIW,gBAAgB,GAAIC,KAAD,IAAgB;AACrCC,IAAAA,OAAO,CAACC,IAAR,CAAaF,KAAK,CAACG,WAAN,CAAkBC,KAA/B;;AACA,QACE,CAACf,cAAD,IACAF,cADA,IAEAA,cAAc,KAAKM,cAHrB,EAIE;AACAC,MAAAA,SAAS,CAACP,cAAD,CAAT;AACD,KAND,MAMO;AACLS,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;AACF,GAXD;;AAYA,QAAMS,QAAQ,GAAG,0BAAc,OAAd,EAAuBd,KAAvB,CAAjB;;AAEA,MAAI,CAACL,GAAL,EAAU;AACRe,IAAAA,OAAO,CAACC,IAAR,CAAa,yCAAb;AACD;;AAED,MAAIP,SAAJ,EAAe;AACb,wBAAO,6BAAC,aAAD,EAAUL,IAAV,EAAiBJ,GAAjB,CAAP;AACD;;AACD,sBACE,6BAAC,WAAD;AACE,IAAA,KAAK,EAAED,KADT;AAEE,IAAA,MAAM,EAAEQ,cAFV;AAGE,IAAA,QAAQ,EAAC,MAHX,CAIE;AACA;AALF;AAME,IAAA,IAAI,EAAE,MANR;AAOE,IAAA,kBAAkB,EAAEP,GAPtB;AAQE,IAAA,iBAAiB,EAAC,OARpB;AASE,IAAA,UAAU,MATZ;AAUE,IAAA,GAAG,EAAEA;AAVP,KAWMmB,QAXN;AAYE,IAAA,OAAO,EAAEd,KAAK,CAACe,OAAN,GAAgBf,KAAK,CAACe,OAAtB,GAAgCP,gBAZ3C;AAaE,IAAA,GAAG,EAAEP;AAbP,KADF;AAiBD,CA1DD;;4BA4DeK,eAAMU,IAAN,eAAWV,eAAMW,UAAN,CAAiBxB,KAAjB,CAAX,C","sourcesContent":["import React, { useState } from 'react';\nimport { Image as RNImage } from 'react-native';\nimport styled from 'styled-components/native';\nimport { border, color, flexbox, layout, space, position } from 'styled-system';\nimport {\n  customBorder,\n  customBackground,\n  customOutline,\n  customLayout,\n  customExtra,\n  customShadow,\n  customPosition,\n} from '../../../utils/customProps';\nimport Text from '../Text';\nimport { useThemeProps } from '../../../hooks';\nimport type { IImageProps } from './types';\n\nconst StyledImage = styled(RNImage)<IImageProps>(\n  color,\n  space,\n  layout,\n  flexbox,\n  border,\n  position,\n  customPosition,\n  customBorder,\n  customBackground,\n  customOutline,\n  customShadow,\n  customExtra,\n  customLayout\n);\n\nconst Image = (\n  {\n    style,\n    alt,\n    fallbackSource,\n    source,\n    ignoreFallback,\n    _alt,\n    ...props\n  }: IImageProps,\n  ref: any\n) => {\n  let [renderedSource, setSource] = useState(source);\n  let [alternate, setAlternate] = useState(false);\n\n  React.useEffect(() => {\n    setAlternate(false);\n    setSource(source);\n  }, [source]);\n\n  let onImageLoadError = (event: any) => {\n    console.warn(event.nativeEvent.error);\n    if (\n      !ignoreFallback &&\n      fallbackSource &&\n      fallbackSource !== renderedSource\n    ) {\n      setSource(fallbackSource);\n    } else {\n      setAlternate(true);\n    }\n  };\n  const newProps = useThemeProps('Image', props);\n\n  if (!alt) {\n    console.warn('Please pass alt prop to Image component');\n  }\n\n  if (alternate) {\n    return <Text {..._alt}>{alt}</Text>;\n  }\n  return (\n    <StyledImage\n      style={style}\n      source={renderedSource}\n      maxWidth=\"100%\"\n      // height='100%'\n      // width=\"auto\"\n      size={'100%'}\n      accessibilityLabel={alt}\n      accessibilityRole=\"image\"\n      accessible\n      alt={alt}\n      {...newProps}\n      onError={props.onError ? props.onError : onImageLoadError}\n      ref={ref}\n    />\n  );\n};\n\nexport default React.memo(React.forwardRef(Image));\nexport type { IImageProps };\n"]}