{"version":3,"sources":["Accordion.tsx"],"names":["Accordion","children","index","pIndex","defaultIndex","allowMultiple","allowToggle","onChange","props","ref","newProps","setIndex","React","useState","changeHandler","isOpening","activeIndex","indexCopy","map","i","push","splice","indexOf","n","memo","forwardRef"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;AAEA,MAAMA,SAAS,GAAG,CAChB;AACEC,EAAAA,QADF;AAEEC,EAAAA,KAAK,EAAEC,MAFT;AAGEC,EAAAA,YAHF;AAIEC,EAAAA,aAJF;AAKEC,EAAAA,WALF;AAMEC,EAAAA,QANF;AAOE,KAAGC;AAPL,CADgB,EAUhBC,GAVgB,KAWb;AACH,QAAMC,QAAQ,GAAG,0BAAc,WAAd,EAA2BF,KAA3B,CAAjB;;AAEA,QAAM,CAACN,KAAD,EAAQS,QAAR,IAAoBC,eAAMC,QAAN,CAAeV,MAAM,IAAIC,YAAV,IAA0B,EAAzC,CAA1B;;AACA,QAAMU,aAAa,GAAG,CAACC,SAAD,EAAqBC,WAArB,KAA6C;AACjE,QAAIC,SAAS,GAAGf,KAAK,CAACgB,GAAN,CAAWC,CAAD,IAAeA,CAAzB,CAAhB;;AACA,QAAIb,WAAJ,EAAiB;AACf,UAAIS,SAAJ,EAAe;AACbE,QAAAA,SAAS,CAACG,IAAV,CAAeJ,WAAf;AACAX,QAAAA,aAAa,GAAGM,QAAQ,CAACM,SAAD,CAAX,GAAyBN,QAAQ,CAAC,CAACK,WAAD,CAAD,CAA9C;AACD,OAHD,MAGO;AACLL,QAAAA,QAAQ,CAACT,KAAK,CAACmB,MAAN,CAAanB,KAAK,CAACoB,OAAN,CAAcN,WAAd,CAAb,EAAyC,CAAzC,CAAD,CAAR;AACD;AACF,KAPD,MAOO;AACL,UAAID,SAAJ,EAAe;AACbE,QAAAA,SAAS,CAACG,IAAV,CAAeJ,WAAf;AACAX,QAAAA,aAAa,GAAGM,QAAQ,CAACM,SAAD,CAAX,GAAyBN,QAAQ,CAAC,CAACK,WAAD,CAAD,CAA9C;AACD,OAHD,MAGO;AACL,6BAAOC,SAAP,EAAmBM,CAAD,IAAOA,CAAC,KAAKP,WAA/B;AACAL,QAAAA,QAAQ,CAACM,SAAD,CAAR;AACD;AACF;;AACDV,IAAAA,QAAQ,IAAIA,QAAQ,CAACU,SAAD,CAApB;AACD,GAnBD;;AAoBA,sBACE,6BAAC,yBAAD,CAAkB,QAAlB;AAA2B,IAAA,KAAK,EAAE;AAAEf,MAAAA,KAAK,EAAEA,KAAT;AAAgBY,MAAAA;AAAhB;AAAlC,kBACE,6BAAC,YAAD,eAASJ,QAAT;AAAmB,IAAA,GAAG,EAAED;AAAxB,MACG,iCAAmBR,QAAnB,CADH,CADF,CADF;AAOD,CA1CD;;4BA4CeW,eAAMY,IAAN,eAAWZ,eAAMa,UAAN,CAAiBzB,SAAjB,CAAX,C","sourcesContent":["import React from 'react';\nimport remove from 'lodash/remove';\nimport Box from '../../primitives/Box';\nimport type { IAccordionProps } from './types';\nimport { useThemeProps } from '../../../hooks';\nimport getIndexedChildren from '../../../utils/getIndexedChildren';\nimport { AccordionContext } from './Context';\n\nconst Accordion = (\n  {\n    children,\n    index: pIndex,\n    defaultIndex,\n    allowMultiple,\n    allowToggle,\n    onChange,\n    ...props\n  }: IAccordionProps,\n  ref: any\n) => {\n  const newProps = useThemeProps('Accordion', props);\n\n  const [index, setIndex] = React.useState(pIndex || defaultIndex || []);\n  const changeHandler = (isOpening: boolean, activeIndex: number) => {\n    let indexCopy = index.map((i: number) => i);\n    if (allowToggle) {\n      if (isOpening) {\n        indexCopy.push(activeIndex);\n        allowMultiple ? setIndex(indexCopy) : setIndex([activeIndex]);\n      } else {\n        setIndex(index.splice(index.indexOf(activeIndex), 1));\n      }\n    } else {\n      if (isOpening) {\n        indexCopy.push(activeIndex);\n        allowMultiple ? setIndex(indexCopy) : setIndex([activeIndex]);\n      } else {\n        remove(indexCopy, (n) => n === activeIndex);\n        setIndex(indexCopy);\n      }\n    }\n    onChange && onChange(indexCopy);\n  };\n  return (\n    <AccordionContext.Provider value={{ index: index, changeHandler }}>\n      <Box {...newProps} ref={ref}>\n        {getIndexedChildren(children)}\n      </Box>\n    </AccordionContext.Provider>\n  );\n};\n\nexport default React.memo(React.forwardRef(Accordion));\n"]}