{"version":3,"sources":["Wrapper.tsx"],"names":["areEqual","prevProps","nextProps","overlayItem","overlayConfig","Wrapper","setOverlayItem","fadeValue","fadeIn","fadeOut","animationDuration","backgroundColor","disableOverlay","isSlideAnimation","motionPreset","overlayStyle","StyleSheet","create","wrapper","position","top","bottom","right","left","zIndex","background","opacity","itemBackground","alignItems","justifyContent","overlayItemHeight","setOverlayItemHeight","React","useState","overlayItemPosition","setOverlayItemposition","windowSize","setWindowSize","readyToAnimate","setReadyToAnimate","provideSize","layoutSize","height","provideWindowSize","setTimeout","placeOverlayItem","webStyle","transition","Platform","OS","e","nativeEvent","layout","closeOnPress","onClose","memo"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport {\n  Animated,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n  Platform,\n} from 'react-native';\nimport { useFadeTransition } from '../../components/composites/Transitions/useFadeTransition';\nimport Box from '../../components/primitives/Box';\nimport isEqual from 'lodash/isEqual';\n\ntype OverlayWrapperType = {\n  overlayItem: any;\n  overlayConfig: any;\n  setOverlayItem: any;\n};\n\nfunction areEqual(\n  prevProps: OverlayWrapperType,\n  nextProps: OverlayWrapperType\n) {\n  if (\n    isEqual(prevProps.overlayItem, nextProps.overlayItem) &&\n    isEqual(prevProps.overlayConfig, nextProps.overlayConfig)\n  )\n    return true;\n  return false;\n}\n\nfunction Wrapper({\n  overlayItem,\n  overlayConfig,\n  setOverlayItem,\n}: OverlayWrapperType) {\n  const { fadeValue, fadeIn, fadeOut } = useFadeTransition(\n    overlayConfig.animationDuration\n  );\n  const backgroundColor = overlayConfig.disableOverlay\n    ? 'transparent'\n    : overlayConfig.backgroundColor ?? '#161616cc';\n  const isSlideAnimation = overlayConfig.motionPreset === 'slide';\n  const overlayStyle = StyleSheet.create({\n    wrapper: {\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      right: 0,\n      left: 0,\n      zIndex: 999,\n    },\n    background: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      zIndex: 999,\n      opacity: 0.5,\n      backgroundColor,\n    },\n    itemBackground: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      alignItems: 'center',\n      justifyContent:\n        overlayConfig.position === 'top'\n          ? 'flex-start'\n          : overlayConfig.position === 'bottom'\n          ? 'flex-end'\n          : 'center',\n      zIndex: 9999,\n    },\n  });\n\n  const [overlayItemHeight, setOverlayItemHeight] = React.useState(0);\n  const [overlayItemPosition, setOverlayItemposition] = React.useState(0);\n  const [windowSize, setWindowSize] = React.useState(0);\n  const [readyToAnimate, setReadyToAnimate] = React.useState(false);\n  const provideSize = (layoutSize: any) => {\n    setOverlayItemHeight(layoutSize.height);\n  };\n  const provideWindowSize = (layoutSize: any) => {\n    setWindowSize(layoutSize.height);\n  };\n\n  useEffect(() => {\n    if (isSlideAnimation) {\n      if (overlayItem && overlayItemHeight) {\n        setTimeout(() => {\n          setReadyToAnimate(true);\n        }, 100);\n      } else if (!overlayItem) {\n        setReadyToAnimate(false);\n      }\n    }\n  }, [isSlideAnimation, overlayItem, overlayItemHeight, setReadyToAnimate]);\n\n  useEffect(() => {\n    if (isSlideAnimation) {\n      switch (overlayConfig.position) {\n        case 'top':\n          setOverlayItemposition(windowSize);\n          break;\n        case 'bottom':\n          setOverlayItemposition(overlayItemHeight);\n          break;\n        default:\n          // as center is default position\n          setOverlayItemposition(windowSize / 2 - overlayItemHeight / 2);\n          break;\n      }\n    }\n  }, [\n    isSlideAnimation,\n    overlayConfig.position,\n    windowSize,\n    overlayItemHeight,\n    setOverlayItemposition,\n  ]);\n\n  const placeOverlayItem = () => {\n    if (readyToAnimate && overlayItem) {\n      const webStyle = {\n        transition: `top ${overlayConfig.animationDuration}ms`,\n        top: 0,\n      };\n      return (\n        <Box width=\"100%\" style={{ ...(Platform.OS === 'web' && webStyle) }}>\n          {overlayItem}\n        </Box>\n      );\n    } else {\n      return (\n        <Box\n          style={{ opacity: 0, top: overlayItemPosition }}\n          onLayout={(e) => provideSize(e.nativeEvent.layout)}\n        >\n          {overlayItem}\n        </Box>\n      );\n    }\n  };\n\n  overlayItem ? fadeIn() : fadeOut();\n  return (\n    <Animated.View\n      style={[overlayStyle.wrapper, { opacity: fadeValue }]}\n      pointerEvents={\n        overlayItem\n          ? overlayConfig.disableOverlay\n            ? 'box-none'\n            : 'auto'\n          : 'none'\n      }\n    >\n      <TouchableWithoutFeedback\n        onPress={() => {\n          if (overlayConfig.closeOnPress) {\n            setOverlayItem(null);\n            overlayConfig.onClose ? overlayConfig.onClose(false) : null;\n          }\n        }}\n      >\n        <View style={overlayStyle.background} />\n      </TouchableWithoutFeedback>\n      {/* Added box-none instead of none to fix Web modal not able to get clicked inside Modal.Body */}\n      <View\n        pointerEvents=\"box-none\"\n        style={overlayStyle.itemBackground}\n        onLayout={(e) => provideWindowSize(e.nativeEvent.layout)}\n      >\n        {isSlideAnimation ? placeOverlayItem() : overlayItem}\n      </View>\n    </Animated.View>\n  );\n}\n\nexport default React.memo(Wrapper, areEqual);\n"]}