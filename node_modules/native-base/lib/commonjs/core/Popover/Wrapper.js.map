{"version":3,"sources":["Wrapper.tsx"],"names":["areEqual","prevProps","nextProps","popoverItem","popoverConfig","providerStyle","StyleSheet","create","wrapper","position","top","bottom","right","left","zIndex","Wrapper","setPopoverItem","state","setState","React","useState","elementWidth","elementHeight","fadeValue","fadeIn","fadeOut","animationDuration","triggerElementDims","setTriggerElementDims","x","y","width","height","getElementDims","nativeEvent","layout","useEffect","triggerRef","current","measureInWindow","positions","placeOverTriggerElement","opacity","onClose","memo"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Animated,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n} from 'react-native';\nimport { getCoordinates } from './../Popover/utils';\nimport { useFadeTransition } from '../../components/composites/Transitions/useFadeTransition';\nimport isEqual from 'lodash/isEqual';\n\ntype PopoverWrapperType = {\n  popoverItem: any;\n  popoverConfig: any;\n  setPopoverItem: any;\n};\n\nfunction areEqual(\n  prevProps: PopoverWrapperType,\n  nextProps: PopoverWrapperType\n) {\n  if (\n    isEqual(prevProps.popoverItem, nextProps.popoverItem) &&\n    isEqual(prevProps.popoverConfig, nextProps.popoverConfig)\n  )\n    return true;\n  return false;\n}\n\nconst providerStyle = StyleSheet.create({\n  wrapper: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n    zIndex: 999,\n  },\n});\n\nfunction Wrapper({\n  popoverItem,\n  popoverConfig,\n  setPopoverItem,\n}: PopoverWrapperType) {\n  const [state, setState] = React.useState<any>({\n    elementWidth: 0,\n    elementHeight: 0,\n  });\n  const { fadeValue, fadeIn, fadeOut } = useFadeTransition(\n    popoverConfig.animationDuration\n  );\n\n  popoverItem ? fadeIn() : fadeOut();\n  const [triggerElementDims, setTriggerElementDims] = React.useState<any>({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  });\n  const getElementDims = ({ nativeEvent }: any) => {\n    if (nativeEvent && nativeEvent.layout) {\n      setState({\n        elementWidth: nativeEvent.layout.width,\n        elementHeight: nativeEvent.layout.height,\n      });\n    }\n  };\n  React.useEffect(() => {\n    if (popoverConfig.triggerRef && popoverConfig.triggerRef.current) {\n      popoverConfig.triggerRef.current.measureInWindow(\n        (x: any, y: any, width: any, height: any) => {\n          setTriggerElementDims({ x, y, width, height });\n        }\n      );\n    }\n  }, [popoverConfig.triggerRef]);\n  let positions = getCoordinates(\n    triggerElementDims.y,\n    triggerElementDims.x,\n    state.elementWidth,\n    state.elementHeight,\n    triggerElementDims.width,\n    triggerElementDims.height,\n    popoverConfig.placeOverTriggerElement\n  );\n  return (\n    <Animated.View\n      style={[providerStyle.wrapper, { opacity: fadeValue }]}\n      pointerEvents={popoverItem ? 'auto' : 'none'}\n    >\n      <TouchableWithoutFeedback\n        onPress={() => {\n          setPopoverItem(null);\n          popoverConfig.onClose && popoverConfig.onClose();\n        }}\n      >\n        <View style={providerStyle.wrapper} />\n      </TouchableWithoutFeedback>\n      <View\n        style={{\n          position: 'absolute',\n          zIndex: 99999,\n          ...positions,\n        }}\n        onLayout={getElementDims}\n      >\n        {popoverItem}\n      </View>\n    </Animated.View>\n  );\n}\n\nexport default React.memo(Wrapper, areEqual);\n"]}